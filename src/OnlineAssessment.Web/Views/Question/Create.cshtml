@model Question

@{
    ViewBag.Title = "CreateQuestion";
}


<div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">新建试题</h3>
    </div>
    <div class="panel-body">
        @using (Html.BeginForm(new { subjectKey = ViewBag.subjectKey })) {
            @Html.AntiForgeryToken()
            if (ViewBag.QuestionForm == QuestionForm.SingleSelection) {
                @Html.Partial("_singleSelectionPartial", new Question {QuestionForm = ViewBag.QuestionForm})
            }

            if (ViewBag.QuestionForm == QuestionForm.MultipleSelection) {
                @Html.Partial("_multipleSelectionPartial", new Question {QuestionForm = ViewBag.QuestionForm})
            }

            if (ViewBag.QuestionForm == QuestionForm.Subjective) {
                @Html.Partial("_subjectivePartial", new Question {QuestionForm = ViewBag.QuestionForm})
            }
        }
    </div>
</div>

@section page_script {
    <script>
        var optionIndex = 0;

        function AddNewOption() {
            var container = $(".question-option");
            optionIndex += 1;
            var html =
                '<div class="input-group">' +
                    '    <span class="input-group-addon">' +
                    '        <input id="QuestionOptions_' + optionIndex + '__IsRightAnswer" name="QuestionOptions[' + optionIndex + '].IsRightAnswer" type="checkbox" value="false">' +
                    '        <input name="QuestionOptions[' + optionIndex + '].IsRightAnswer" type="hidden" value="true">' +
                    '    </span>' +
                    '    <input class="form-control" id="QuestionOptions_' + optionIndex + '__Description" name="QuestionOptions[' + optionIndex + '].Description" type="text" value="">' +
                    '</div>';
            var option = $(html);
            container.append(option);
        }
    </script>
}
